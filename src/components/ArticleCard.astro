---
// src/components/ArticleCard.astro
import { Image } from 'astro:assets';

// 1. Actualizamos la 'Interface' para que coincida con 'CleanPost'
interface Props {
    post: {
        slug: string;
        image: string; // <-- Ya es una URL completa (string)
        alt: string;
        imageWidth: number; // <-- A√±adimos esto
        imageHeight: number; // <-- A√±adimos esto
        duration: string;
        title: string;
        excerpt: string;
        tags: string[];
        publishedDate: string;
    }
}
const { post } = Astro.props;

// 2. üõë ELIMINAMOS TODA LA L√ìGICA ANTIGUA DE IM√ÅGENES
// const blogImages = import.meta.glob(...);
// const imagePath = ...
// if (!blogImages[imagePath]) { ... }

// 3. Mantenemos tu formato de fecha original
const formattedDate = new Date(post.publishedDate).toLocaleDateString('es-CL', {
    day: '2-digit',
    month: '2-digit',
    year: 'numeric',
    timeZone: 'UTC',
});
---

<a href={`/blog/${post.slug}`} class="card blog-card">
    <div class="image-blog-card">

        <Image 
            src={post.image}           alt={post.alt} 
            width={post.imageWidth}    height={post.imageHeight}  quality={80}
            loading="lazy"
            decoding="async"
        />
        <div class="tags">
            {post.tags.slice(0, 2).map(tag => <span class="tag">{tag}</span>)}
        </div>
    </div>
    <div class="blog-card-content">
        <div class="blog-card-meta">
            <time datetime={post.publishedDate}>{formattedDate}</time>
            <span>‚Ä¢</span>
            <span>{post.duration}</span>
        </div>
        <h3>{post.title}</h3>
        <p>{post.excerpt}</p>
        <span class="read-more">Leer m√°s <i class="ph ph-arrow-right"></i></span>
    </div>
</a>